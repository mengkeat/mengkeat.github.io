---
interface Props {
  title: string;
  description: string;
  date: Date;
  tags?: string[];
  url: string;
  type?: 'blog' | 'til';
}

const { title, description, date, tags = [], url, type = 'blog' } = Astro.props;
const { slugify } = await import('../lib/tags');
const { formatDate } = await import('../lib/utils');
---

<article class="group">
  <div class="flex flex-col md:flex-row md:items-start gap-6">
    <div class="md:w-32 flex-shrink-0">
      <time class="text-sm text-stone-500 font-medium" datetime={date.toISOString()}>
        {formatDate(date)}
      </time>
    </div>
    <div class="flex-1">
      <h3 class={`font-medium text-stone-900 mb-3 leading-tight-heading ${
        type === 'blog' ? 'text-xl' : 'text-lg'
      }`}>
        <a href={url} class="group-hover:text-amber-700 transition-colors duration-200">
          {title}
        </a>
      </h3>
      <p class="text-stone-600 mb-4 leading-relaxed-reading">
        {description}
      </p>
      {tags && tags.length > 0 && (
        <div class="flex flex-wrap gap-2">
          {tags.slice(0, type === 'blog' ? 4 : 3).map((tag) => (
            <a
              href={`/tags/${slugify(tag)}`}
              class="inline-block bg-warm-100 text-stone-600 text-sm px-3 py-1 rounded-full hover:bg-warm-200 transition-colors duration-200"
            >
              {tag}
            </a>
          ))}
        </div>
      )}
    </div>
  </div>
</article>
