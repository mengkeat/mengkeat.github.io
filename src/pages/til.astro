---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import ContentCard from '../components/ContentCard.astro';

const title = "Today I Learned (TIL)";
const description = "Quick learnings, tips, and discoveries from daily programming and life.";

const allTILs = await getCollection('til', ({ data }) => {
  return data.draft !== true;
});

const sortedTILs = allTILs.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<BaseLayout title={title} description={description}>
  <div class="mb-16">
    <h1 class="text-4xl font-light text-stone-900 mb-6 leading-tight-heading tracking-slight">Today I Learned</h1>
    <p class="text-xl text-stone-600 leading-relaxed-reading">
      Quick discoveries, tips, and "aha!" moments from daily learning and exploration.
    </p>
  </div>

  <div class="space-y-8">
    {sortedTILs.map((til) => (
      <ContentCard
        title={til.data.title}
        description={til.data.description}
        date={til.data.pubDate}
        tags={til.data.tags}
        url={`/til/${til.slug}`}
        type="til"
      />
    ))}
  </div>
</BaseLayout>
