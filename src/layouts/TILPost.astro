---
import BaseLayout from './BaseLayout.astro';
import { slugify } from '../lib/tags';

export interface Props {
  frontmatter: {
    title: string;
    description: string;
    pubDate: Date;
    tags: string[];
    category: string;
  };
}

const { frontmatter } = Astro.props;
const { formatDateLong } = await import('../lib/utils');
---

<BaseLayout title={frontmatter.title} description={frontmatter.description}>
  <article class="max-w-3xl mx-auto">
    <header class="mb-12">
      <h1 class="text-4xl md:text-5xl font-light text-stone-900 mb-6 leading-tight-heading tracking-slight">
        {frontmatter.title}
      </h1>
      <p class="text-xl text-stone-600 leading-relaxed-reading mb-8">
        {frontmatter.description}
      </p>
      <div class="flex flex-wrap items-center gap-6 text-sm text-stone-500 mb-6">
        <time datetime={frontmatter.pubDate.toISOString()} class="font-medium">
          {formatDateLong(frontmatter.pubDate)}
        </time>
        <span class="font-medium">
          Category: {frontmatter.category}
        </span>
      </div>
      {frontmatter.tags && frontmatter.tags.length > 0 && (
        <div class="flex flex-wrap gap-2">
          {frontmatter.tags.map((tag) => (
            <a
              href={`/tags/${slugify(tag)}`}
              class="inline-block bg-warm-100 text-stone-600 text-sm px-3 py-1 rounded-full hover:bg-warm-200 transition-colors duration-200"
            >
              {tag}
            </a>
          ))}
        </div>
      )}
    </header>

    <div class="prose prose-lg max-w-none">
      <slot />
    </div>
  </article>
</BaseLayout>
